# =============================================================================
# sidecar.base.conf - Agent Sidecar Configuration
# =============================================================================
# This file can override defaults set in run-agent-sidecar.sh.
#
# Override in your repo with:
#   - sidecar.repo.conf  (team overrides, committed)
#   - sidecar.local.conf (personal overrides, gitignored)
#
# Resolution order: local > repo > base > script defaults
#
# SECURITY NOTE: The .agent_sidecar directory is NOT accessible to agents
# inside the container. It is mounted at /etc/agent-sidecar (read-only) for
# system init scripts, and shadowed with an empty tmpfs in the workspace.
# This prevents agents from reading or modifying sidecar configuration.
# =============================================================================

# -----------------------------------------------------------------------------
# Image Name (default: agent-sidecar-image)
# -----------------------------------------------------------------------------
# Custom image name for this repo's container.
# IMAGE_NAME="agent-sidecar-image"

# -----------------------------------------------------------------------------
# Dockerfile Variant (default: node-py)
# -----------------------------------------------------------------------------
# Select a Dockerfile variant. Pattern: {variant}.{tier}.dockerfile
#
# Available variants:
#   - node-py (default - Python/Node/TS)
#   - rust    (Rust + Python/Node) - TODO
#   - python  (Python only) - TODO
#
# Resolution for selected variant:
#   1. .agent_sidecar/{variant}.local.dockerfile (personal, gitignored)
#   2. .agent_sidecar/{variant}.repo.dockerfile (team, committed)
#   3. agent_sidecar/{variant}.base.dockerfile (default)
#
# Example: DOCKERFILE_VARIANT="rust"
# DOCKERFILE_VARIANT="node-py"

# -----------------------------------------------------------------------------
# Extra Mounts (default: ~/.aws and ~/.config/micro)
# -----------------------------------------------------------------------------
# Additional Docker volume mounts (space-separated).
# Format: -v /host/path:/container/path[:options]
#
# Default mounts (set in script):
#   -v $HOME/.aws:/home/node/.aws:ro
#   -v $HOME/.config/micro:/home/node/.config/micro
#
# To ADD more mounts, include the defaults plus your additions:
#   EXTRA_MOUNTS="-v $HOME/.aws:/home/node/.aws:ro -v $HOME/.config/micro:/home/node/.config/micro -v /extra:/extra"
#
# To REPLACE defaults entirely:
#   EXTRA_MOUNTS="-v /only/this:/mount"
#
# EXTRA_MOUNTS=""

# -----------------------------------------------------------------------------
# Extra APT Packages (default: none)
# -----------------------------------------------------------------------------
# Additional apt packages to install at Docker build time.
# Space-separated list of package names.
#
# Example: EXTRA_APT_PACKAGES="chromium libfuse2 htop"
#
# NOTE: Requires --reset to rebuild image when changed.
# EXTRA_APT_PACKAGES=""

# -----------------------------------------------------------------------------
# Build-Extra Script (default: none)
# -----------------------------------------------------------------------------
# Custom script that runs at Docker BUILD TIME (with full network access).
# Use this to install AppImages, download binaries, or set up tools that
# the agent should have but cannot download at runtime.
#
# Files (resolution: .local > .repo):
#   - build-extra.local.sh (.agent_sidecar/ - personal, gitignored)
#   - build-extra.repo.sh  (.agent_sidecar/ - team, committed)
#
# The script runs as root and can:
#   - Download from any URL (no firewall at build time)
#   - Install to /opt, /usr/local/bin, etc.
#   - Extract AppImages without libfuse2
#
# Example (.agent_sidecar/build-extra.repo.sh):
#   #!/bin/bash
#   # Install Obsidian (extracted AppImage, no libfuse2 needed)
#   OBSIDIAN_VERSION="1.5.3"
#   curl -L "https://github.com/obsidianmd/obsidian-releases/releases/download/v${OBSIDIAN_VERSION}/Obsidian-${OBSIDIAN_VERSION}.AppImage" -o /tmp/obsidian.AppImage
#   chmod +x /tmp/obsidian.AppImage
#   cd /opt && /tmp/obsidian.AppImage --appimage-extract
#   mv squashfs-root obsidian
#   ln -s /opt/obsidian/obsidian /usr/local/bin/obsidian
#   rm /tmp/obsidian.AppImage
#
# NOTE: Requires --reset to rebuild image when script changes.

# -----------------------------------------------------------------------------
# Init Script Extras (default: none)
# -----------------------------------------------------------------------------
# Add commands to run AFTER base init scripts complete (at container RUNTIME):
#   - init-background-extra.repo.sh  (.agent_sidecar/ - team commands)
#   - init-background-extra.local.sh (.agent_sidecar/ - personal commands)
#   - init-foreground-extra.repo.sh  (.agent_sidecar/ - team shell setup)
#   - init-foreground-extra.local.sh (.agent_sidecar/ - personal shell setup)
#
# These run IN ADDITION to base scripts (additive, not replacement).
# The original init-{bg,fg}.{repo,local}.sh replacement pattern still works.
